{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { createClient } from '@supabase/supabase-js';\nimport { jsxs as _jsxs, jsx as _jsx } from \"react/jsx-runtime\";\nvar supabase = createClient(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);\nexport default function HomePage(_ref) {\n  var onStartNewRequest = _ref.onStartNewRequest;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    jobs = _useState2[0],\n    setJobs = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  useEffect(function () {\n    var fetchJobs = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          var _yield$supabase$from$ = yield supabase.from('chat_logs').select('*').order('created_at', {\n              ascending: false\n            }),\n            data = _yield$supabase$from$.data,\n            _error = _yield$supabase$from$.error;\n          if (_error) {\n            console.error('❌ Supabase error:', _error.message);\n            setError(_error.message);\n          } else {\n            setJobs(data || []);\n          }\n        } catch (err) {\n          console.error('❌ Unexpected error fetching jobs:', err);\n          setError('Something went wrong while fetching your requests.');\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function fetchJobs() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    fetchJobs();\n  }, []);\n  var renderItem = function renderItem(_ref3) {\n    var item = _ref3.item;\n    return _jsxs(View, {\n      style: styles.jobCard,\n      children: [_jsxs(Text, {\n        style: styles.summary,\n        children: [\"Summary: \", item.assistant_reply || 'No summary']\n      }), _jsxs(Text, {\n        children: [\"Category: \", item.category || 'N/A']\n      }), _jsxs(Text, {\n        children: [\"Created: \", item.created_at ? new Date(item.created_at).toLocaleString() : 'Unknown']\n      })]\n    });\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.header,\n      children: \"\\uD83E\\uDDFE Your Requests\"\n    }), _jsx(Button, {\n      title: \"\\u2795 Start New Request\",\n      onPress: onStartNewRequest\n    }), loading ? _jsx(ActivityIndicator, {\n      size: \"large\",\n      color: \"#007AFF\",\n      style: {\n        marginTop: 20\n      }\n    }) : error ? _jsxs(Text, {\n      style: styles.error,\n      children: [\"Error: \", error]\n    }) : jobs.length === 0 ? _jsx(Text, {\n      style: styles.empty,\n      children: \"No requests found. Start one above!\"\n    }) : _jsx(FlatList, {\n      data: jobs,\n      keyExtractor: function keyExtractor(item, index) {\n        var _item$id;\n        return ((_item$id = item.id) == null ? void 0 : _item$id.toString()) || index.toString();\n      },\n      renderItem: renderItem,\n      contentContainerStyle: {\n        paddingBottom: 20\n      }\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 20\n  },\n  header: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 10\n  },\n  jobCard: {\n    padding: 12,\n    borderWidth: 1,\n    borderColor: '#ccc',\n    marginVertical: 6,\n    borderRadius: 6,\n    backgroundColor: '#F9F9F9'\n  },\n  summary: {\n    fontWeight: 'bold',\n    marginBottom: 4\n  },\n  error: {\n    color: 'red',\n    marginTop: 20\n  },\n  empty: {\n    marginTop: 20,\n    fontStyle: 'italic',\n    color: '#666'\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","View","Text","Button","FlatList","StyleSheet","ActivityIndicator","createClient","jsxs","_jsxs","jsx","_jsx","supabase","process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","HomePage","_ref","onStartNewRequest","_useState","_useState2","_slicedToArray","jobs","setJobs","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","fetchJobs","_ref2","_asyncToGenerator","_yield$supabase$from$","from","select","order","ascending","data","console","message","err","apply","arguments","renderItem","_ref3","item","style","styles","jobCard","children","summary","assistant_reply","category","created_at","Date","toLocaleString","container","header","title","onPress","size","color","marginTop","length","empty","keyExtractor","index","_item$id","id","toString","contentContainerStyle","paddingBottom","create","flex","padding","fontSize","fontWeight","marginBottom","borderWidth","borderColor","marginVertical","borderRadius","backgroundColor","fontStyle"],"sources":["/Users/michaelverwaayen/RFQ/mobile/HomePage.js"],"sourcesContent":["// HomePage.js\nimport React, { useEffect, useState } from 'react';\nimport { View, Text, Button, FlatList, StyleSheet, ActivityIndicator } from 'react-native';\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n);\n\nexport default function HomePage({ onStartNewRequest }) {\n  const [jobs, setJobs] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchJobs = async () => {\n      try {\n        const { data, error } = await supabase\n          .from('chat_logs')\n          .select('*')\n          .order('created_at', { ascending: false });\n\n        if (error) {\n          console.error('❌ Supabase error:', error.message);\n          setError(error.message);\n        } else {\n          setJobs(data || []);\n        }\n      } catch (err) {\n        console.error('❌ Unexpected error fetching jobs:', err);\n        setError('Something went wrong while fetching your requests.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchJobs();\n  }, []);\n\n  const renderItem = ({ item }) => (\n    <View style={styles.jobCard}>\n      <Text style={styles.summary}>\n        Summary: {item.assistant_reply || 'No summary'}\n      </Text>\n      <Text>Category: {item.category || 'N/A'}</Text>\n      <Text>Created: {item.created_at ? new Date(item.created_at).toLocaleString() : 'Unknown'}</Text>\n    </View>\n  );\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.header}>🧾 Your Requests</Text>\n      <Button title=\"➕ Start New Request\" onPress={onStartNewRequest} />\n      \n      {loading ? (\n        <ActivityIndicator size=\"large\" color=\"#007AFF\" style={{ marginTop: 20 }} />\n      ) : error ? (\n        <Text style={styles.error}>Error: {error}</Text>\n      ) : jobs.length === 0 ? (\n        <Text style={styles.empty}>No requests found. Start one above!</Text>\n      ) : (\n        <FlatList\n          data={jobs}\n          keyExtractor={(item, index) => item.id?.toString() || index.toString()}\n          renderItem={renderItem}\n          contentContainerStyle={{ paddingBottom: 20 }}\n        />\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: { flex: 1, padding: 20 },\n  header: { fontSize: 24, fontWeight: 'bold', marginBottom: 10 },\n  jobCard: {\n    padding: 12,\n    borderWidth: 1,\n    borderColor: '#ccc',\n    marginVertical: 6,\n    borderRadius: 6,\n    backgroundColor: '#F9F9F9'\n  },\n  summary: { fontWeight: 'bold', marginBottom: 4 },\n  error: { color: 'red', marginTop: 20 },\n  empty: { marginTop: 20, fontStyle: 'italic', color: '#666' }\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}